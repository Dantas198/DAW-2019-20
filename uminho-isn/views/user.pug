extends mainLayout

block page
  .album.py-5.bg-light
    .row
      .col(style='margin-left: 20px')
        .container(style="padding-top: 50px;").text-center.bg-white
          if(user.image != undefined)
            img(src='/usersImg/' + user.name + '/' + user.image.name alt="http://placehold.it/200x200")
          else
            img(src="http://placehold.it/200x200" alt="http://placehold.it/200x200")
          .container
            .container.user-text
              h6= user.name
              p= user.email
            .container(style='padding-top: 10px; padding-bottom: 50px')
              form(action=('/profile/' + user.name + '/image') method='POST' enctype="multipart/form-data")
                input.w3-input.w3-cell(type="file" name="img")
                button.btn.btn-primary(type='submit') Publicar imagem
      .col(style='margin-right: 20px')
        .container(style="padding-top: 10px;").text-center.bg-white
          h4 Subscrições atuais
          form(action=('/subscription/' + user.name) method='POST')
              textarea.form-control(placeholder='Escreva o nome de uma tag para adicionar...' name="text", rows='1' required)
              br
              button.btn.btn-primary(type='submit') Subscrever
          if(user.subscriptions.length > 0)
            hr
            table.table
              thead
                tr
                  th(scope="col" style="width: 80%") Tag
                  th(scope="col") 
              tbody
                each sub in user.subscriptions
                  tr
                    td
                      a(href='/?tag=' + sub role="button")= sub
                    td 
                      button.btn.btn-sm.i.fas.fa-window-close(onclick="apagarSub('" + sub +"','" + user.name + "')")
          else
            .container(style="padding-bottom: 10px; padding-top: 20px;" )
              h5 De momento não tens subscrições
                
    .row
      .container(style="margin-top: 50px").text-center.bg-white
        h4 Menções 
        if(user.mentions.length > 0)
          table.table
            thead
              tr
                th(scope="col") Id
                th(scope="col") Titulo
                th(scope="col") Autor
                th(scope="col") Data
            tbody
              each mention in user.mentions
                tr
                  td= mention._id
                  td= mention.title
                  td= mention.poster
                  td= mention.date
        else
          h5 Ainda não foste mencionado
